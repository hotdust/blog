下面的两篇文章已经写的很好了，推荐看一下：

[RocketMQ——消息文件过期原理](http://jaskey.github.io/blog/2017/02/16/rocketmq-clean-commitlog/)
[源码分析RocketMQ文件清除机制](https://blog.csdn.net/prestigeding/article/details/79482339)